{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block content %}

<div>
  <h1 class="text-center my-3">Profile Page</h1>
  <div class="d-flex justify-content-center">
    <a href="{% url 'edit_profile' %}" class="btn btn-primary">Edit your Profile</a>
  </div>
</div>

{% if borrows %}
  <div class="container">

    <table class="table table-bordered">
  <thead>
    <tr>
      <th scope="col">Date</th>
      <th scope="col">Transaction Type</th>
      <th scope="col">Book</th>
      <th scope="col">Amount</th>
      <th scope="col">Current Balance</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
        {% for i in borrows %}
          <tr>
            <td>{{ i.timestamps|date:"F d, Y h:i A" }}</td>
            <td>{{ i.get_transaction_type_display }}</td>
            <td>{{ i.book.title }}</td>
            <td>{{ i.amount }}</td>
            <td>{{ i.balance_after_transaction }}</td>
            <td><a href="{% url 'return' i.id %}" class="btn btn-warning">Return</a></td>
          </tr>
        {% endfor %}
      <tr>
          <td colspan="2"></td>
          <td><strong>Total Borrowing Price:</strong></td>
          <td colspan="2"><b>${{ total_borrowing_price }}</b> </td>
        </tr>
</table>

  </div>
{% else %}
<h1 class="text-danger text-center">No Previous Buy Items</h1>
{% endif %}

{% endblock content %}